<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Camargue: External Dependencies</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Camargue
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">External Dependencies </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Camargue would not exist without heavy reuse of facilities from Concorde, CPLEX, and C++11/the C++ STL. The philosophy has been to reuse code from these sources wherever reasonably (and sometimes unreasonably) possible. In light of this, remaining dependencies have been implemented on an as-you-like basis.</p>
<p>As mentioned in the README, </p><pre class="fragment">./cmr_install.py --full
</pre><p>does a full install with all the dependencies described below. To add individual ones, it should be sufficient to run <code>make clean</code> and then pass additional flags to the install script with the <code>-W</code> flag. The add-ons, and their corresponding flags, are as follows:</p>
<ul>
<li>Primal separation of safe Gomory cuts, <code>-W safemir</code></li>
<li>Unit tests and benchmarks with Catch, <code>-W catch</code></li>
<li>Shared-memory parallelism with OpenMP, <code>-W omp</code></li>
</ul>
<h2>Safe Gomory Cuts </h2>
<p>In "Primal Cutting Plane Algorithms Revisted", Letchford and Lodi describe how to generate Gomory cuts that solve the primal separation problem. To avoid issues with edge pricing, Gomory cuts are only used on sparse instances. In these cases, though, their effect on the solution process is quite dramatic. For an idea of how they are called in Camargue, see the documentation for <a class="el" href="class_c_m_r_1_1_sep_1_1_safe_gomory.html" title="Primal separation of safe Gomory cuts. ">CMR::Sep::SafeGomory</a>.</p>
<p>Safe Gomory cuts are implemented using the code of William Cook, Sanjeeb Dash, Ricardo Fukasawa, and Marcos Goycoolea, provided as a supplement to their paper "Numerically
Safe Gomory Mixed-Integer Cuts" in the Informs Journal of Computing. The code is available as a supplement from the publisher <a href="https://www.informs.org/Pubs/IJOC/Online-Supplements/Volume-21-2009/Cook-Dash-Fukasawa-Goycoolea">here</a>.</p>
<p>If requested, the Camargue install script will downloaded the gzipped tarball at the link above, extracting it to <code>camargue/externals</code>. The script will then make some minor edits to some files in <code>safemir/src</code>. Some of the edits just prevent compiler warnings, but others are required for the project to compile.</p>
<p>If you have already downloaded the code with the link above, create a symlink to the directory <code>safemir</code> in the <code>camargue/externals</code> folder. So <code>safemir</code> must be the name of the file containing the folder <code>src</code>. If you already had the code downloaded, you will still need to make the automated changes just described. The Camargue install script will check if the folder is already present, in which case it will only make the edits, rather than re-downloading and extracting.</p>
<h2>Catch Unit Tests </h2>
<p>This section just describes installation of the Catch unit testing framework. For info on running the tests, and suggested usage, see <a class="el" href="utests.html">Catch Unit Tests</a>.</p>
<p>The current version of Camargue has been developed in a test driven fashion with the help of the unit testing framework <a href="https://github.com/philsquared/Catch">Catch</a>: C++ Automated Test Cases in Headers. To use it with Camargue, just put the <a href="https://raw.githubusercontent.com/philsquared/Catch/master/include/catch.hpp">Catch header</a> (or a symlink to it) in the 'camargue/externals' folder.</p>
<p>To compile Camargue in testing mode, use the recipe <code>make test</code>. This edits a line in <a class="el" href="config_8hpp.html" title="Configuration macros. ">config.hpp</a> to enable testing, <code>make</code>s the project, then reverts <a class="el" href="config_8hpp.html" title="Configuration macros. ">config.hpp</a> afterward. Thus, subsequent calls to <code>make</code> should just build the normal command line executable. This will <em>not</em> happen if, for some reason, the compilation process is killed midway through <code>make test</code>. In this case, <code>make remake</code> or <code>make undeftest all</code> will revert <code><a class="el" href="config_8hpp.html" title="Configuration macros. ">config.hpp</a></code>, again allowing the Camargue solver to be built.</p>
<p>If you want to run the tests, there are some requirements on what your <code>camargue</code> directory has to look like. Most importantly, all the tests search for TSPLIB instances in a folder called <code>problems</code> in the Camargue directory, so at <code>camargue/problems</code>. Thus, if you have a folder containing the TSPLIB instances from <a href="http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/tsp/">here</a>, and you have extracted the problems, just create a symlink to the containing folder in the <code>camargue/</code> directory. The other requirement is the <code>test_data</code> folder. This folder contains three subdirectories:</p>
<ul>
<li><code>tours</code> for (often suboptimal, sometimes deliberately terrible) TSP tours</li>
<li><code>subtour_lp</code> for files with names like <code>att532.sub.x</code></li>
<li><code>blossom_lp</code> for files with names like <code>d493.2m.x</code></li>
</ul>
<p>The latter two are cases where Concorde was used with the flag <code>-i</code> or <code>-I</code> to solve over the blossom or subtour polytope, respectively. Running <code>scripts/make_test_data.py</code> will generate these files for you.</p>
<ul>
<li>you have linked to a working build of Concorde in <code>externals</code>, and</li>
<li>you have created the <code>problems</code> symlink in the camargue directory.</li>
</ul>
<p>If you have some files but not others, the script will do a simple check before actually invoking Concorde.</p>
<p>The tests used to develop Camargue, and to write my thesis, contain examples of size up to and including the largest TSPLIB instance, <code>pla85900</code>. Although Concorde can very quickly compute subtour polytope optima for such instances, you may want to skip them for quicker generation of the majority of test cases. By default, <code>make_test_data.py</code> skips examples of size bigger than 15,000 nodes, but you can override this behaviour with the flag <code>--large</code>.</p>
<p>The exception to the cases described are a family of extremely tiny examples that I created, <code>blossom6.tsp</code>, <code>comb9.tsp</code>, <code>fleisA9.tsp</code> and <code>fleisB9.tsp</code>. The instances <code>blossom6</code> and <code>comb9</code> are familiar blackboard examples used to illustrate subtour and comb inequalities. The instances <code>fleisA9</code> and <code>fleisB9</code> are an attempt to recreate Figures 2 and 5 from Fleischer et al.'s 2006 paper on simple DP inequalities. These TSP instances have been placed in the <code>test_data</code> directory, with tours and LP solutions in subdirectories as appropriate.</p>
<p>If you want to develop or modify tests (or do the special tests with <code>pla85900</code>), <code>make test</code> will cause slow compile times, and it will not be possible to manually enable OpenMP, if desired. For this, I have provided the recipe <code>make develop_test</code>, which modifies <code><a class="el" href="config_8hpp.html" title="Configuration macros. ">config.hpp</a></code> to build tests, without changing it back after. To go back to normal from this, you can use <code>make undeftest all</code> or <code>make remake</code>.</p>
<h2>OpenMP Parallelism </h2>
<p>There are a few separation routines in the code that can be implemented to run in parallel. I have chosen to implement this using the <a href="http://www.openmp.org/">OpenMP</a> standard for an extremely simple approach. Unlike the other external dependencies, this one is not a download. Rather, if requested, <code>cmr_install.py</code> will try to test if your compiler supports OpenMP (OMP), editing the <code>Makefile</code> accordingly. Unlike the other examples, there is no script that will download anything: if your compiler doesn't support OMP it is probably not worth it to download and install a new one just for that.</p>
<p>In "Primal Separation Algorithms", Letchford and Lodi observe that the minimum cut computations in their blossom separation algorithm are "independent of each other", so I have implemented these to run concurrently. And in my approach to primal simple DP separation, it is possible to search the Karp partitioned witness cutgraphs in parallel. From a practical point of view in either case the speedup is pleasant but not earth shattering, as neither separation routine is called terribly often.</p>
<p>The OMP standard dictates that if the compiler does not support OMP <code>#pragma</code>s, they are simply ignored and the result is still valid code. However in my implementations there is a bit of added overhead for memory management or error checking, so the result is not as clean as the implementation that could be used in the serial case. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
